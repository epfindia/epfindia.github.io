<!DOCTYPE html>
<html lang="en">
<head>
<title>Contacts</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<style>
.list-group {
	margin-bottom:0px;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-cookies.js" type="text/javascript"></script>
</head>
<body>
    	<div class="container" ng-app="myApp" ng-controller="namesCtrl">
	<div class="btn-group">
			<a href="./" class="btn btn-sq-lg btn-default"><i class="fa fa-user"> Back</i></a>
	</div>
	<h3>Contacts</h3>
		<h5>Wait 2-5 seconds to load</h5>

          <div class="panel panel-default">
            <div class="panel-heading">
              <input type="text" style="width:100%; padding:4px;" placeholder="Search by Name or Office " ng-model="test" />
            </div>
          </div>

				
	<div class="table-responsive">
            <table class="table table-condensed table-hover table-bordered table-striped">
              <thead>
                <tr>
                <th class="col-md-4" >Name</th>
		<th class="col-md-2">Office</th>
		<th class="col-md-1">DESIGNATION</th>
		<th class="col-md-2">Email</th>
		<th class="col-md-2">Contact</th>
                </tr>
              </thead>

              <tbody>
                <tr ng-repeat="x in offices | filter:test">
                    <td>{{x.OFFICER_NAME}}</td>
		    <td>{{x.OFFICE_OF_POSTING}}</td>
		    <td>{{x.DESIGNATION}}</td>
		    <td>{{x.EMAIL}}</td>
			<td style="max-width:20%;">{{x.PHONE_NO}}</td>
                  </tr>
              </tbody>
            </table>

</div>
</div>
<script type="text/javascript">

//<![CDATA[
//example.com/?product=shirt&color=blue&newuser&size=m

//Hereâ€™s a function to give you all the URL parameters as a neat object:

function getAllUrlParams(url) {

  // get query string from url (optional) or window
  var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

  // we'll store the parameters here
  var obj = {};

  // if query string exists
  if (queryString) {

    // stuff after # is not part of query string, so get rid of it
    queryString = queryString.split('#')[0];

    // split our query string into its component parts
    var arr = queryString.split('&');

    for (var i=0; i<arr.length; i++) {
      // separate the keys and the values
      var a = arr[i].split('=');

      // in case params look like: list[]=thing1&list[]=thing2
      var paramNum = undefined;
      var paramName = a[0].replace(/\[\d*\]/, function(v) {
        paramNum = v.slice(1,-1);
        return '';
      });

      // set parameter value (use 'true' if empty)
      var paramValue = typeof(a[1])==='undefined' ? true : a[1];

      // (optional) keep case consistent
      paramName = paramName.toLowerCase();
      paramValue = paramValue.toLowerCase();

      // if parameter name already exists
      if (obj[paramName]) {
        // convert value to array (if still string)
        if (typeof obj[paramName] === 'string') {
          obj[paramName] = [obj[paramName]];
        }
        // if no array index number specified...
        if (typeof paramNum === 'undefined') {
          // put the value on the end of the array
          obj[paramName].push(paramValue);
        }
        // if array index number specified...
        else {
          // put the value at that index number
          obj[paramName][paramNum] = paramValue;
        }
      }
      // if param name doesn't exist yet, set it
      else {
        obj[paramName] = paramValue;
      }
    }
  }

  return obj;
}
console.log(getAllUrlParams().q);
  var app = angular.module('myApp', ['ngCookies']);
  app.controller('namesCtrl', ['$scope','$cookies','$cookieStore', '$http', function($scope,$cookies,$cookieStore, $http) {
                                 $scope.names = [];
                                 $scope.test=getAllUrlParams().q;

                                 $http({
                                   method: 'GET',
                                   url: 'contacts2.json'
                                 }).then(function (success){
                                   $scope.offices = success.data;
                                 },function (error){
                                   console.log(error)
                                 });
                               }]);
  //]]>
  </script>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36392471-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-36392471-2');
</script>
</body>
</html>
